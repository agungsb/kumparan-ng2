{"version":3,"file":"kumparan-ng2.component.js","sourceRoot":"","sources":["kumparan-ng2.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, NgZone, ViewChild} from '@angular/core';\n// import { MdButton } from '@angular2-material/button';\nimport {MATERIAL_DIRECTIVES, MATERIAL_PROVIDERS, ITableSelectionChange} from 'ng2-material';\nimport {MD_TOOLBAR_DIRECTIVES} from '@angular2-material/toolbar';\nimport {MdCheckbox} from '@angular2-material/checkbox';\nimport {MdInput} from '@angular2-material/input';\nimport {employees} from './employees';\nimport {fotosrc} from './fotosrc';\nimport {AngularIndexedDB} from './angular2-indexeddb';\n\n@Component({\n  moduleId: module.id,\n  selector: 'kumparan-ng2-app',\n  templateUrl: 'kumparan-ng2.component.html',\n  directives: [MATERIAL_DIRECTIVES, MD_TOOLBAR_DIRECTIVES, MdCheckbox, MdInput],\n  providers: [MATERIAL_PROVIDERS],\n  styleUrls: ['kumparan-ng2.component.css']\n})\nexport class KumparanNg2AppComponent {\n  @ViewChild('custom') dialog;\n  zone: NgZone;\n  fotosrc: string = fotosrc;\n  selected: Array<any> = [];\n  selection: string;\n  count: number;\n  foundIndex: Array<any> = [];\n  keyword: String = \"\";\n  searchResult: String;\n\n  id: number;\n  nama: string;\n  ssn: string;\n  email: string;\n\n  request: any;\n  employeesData: Array<any> = [];\n  db: any;\n  dbName: string = \"company_db\";\n  objectStoreName: string = \"employees\";\n  constructor() {\n  }\n  ngOnInit() {\n    this.init();\n  }\n  init() {\n    var _self = this;\n    this.db = new AngularIndexedDB(this.dbName, 1);\n    this.db.createStore(1, (event) => {\n      console.log(event);\n      if (event.oldVersion > 0 && event.newVersion > event.oldVersion) {\n        this.db.clear(_self.objectStoreName).then(() => {\n          console.log('cleared and recreated');\n          this.createRecords(event);\n        });\n      } else {\n        console.log('created');\n        this.createRecords(event);\n      }\n    }).then(() => {\n      // console.log(this.db);\n      this.readAllRecords();\n    });\n  }\n  resetForm() {\n    this.keyword = \"\";\n    this.ssn = \"\";\n    this.nama = \"\";\n    this.email = \"\";\n    this.dialog.close();\n  }\n  createRecords(event: any) {\n    let objectStore = event.target.result.createObjectStore(this.objectStoreName, { keyPath: \"id\", autoIncrement: false });\n\n    objectStore.createIndex(\"ssn\", \"ssn\", { unique: true });\n\n    objectStore.createIndex(\"nama\", \"nama\", { unique: false });\n\n    objectStore.createIndex(\"email\", \"email\", { unique: true });\n\n    objectStore.createIndex(\"foto\", \"foto\", { unique: false });\n  }\n  readAllRecords() {\n    this.db.openCursor(this.objectStoreName, (evt) => {\n      var cursor = evt.target.result;\n      if (cursor) {\n        this.employeesData.push({ \"id\": cursor.key, \"ssn\": cursor.value.ssn, \"nama\": cursor.value.nama, \"email\": cursor.value.email, \"foto\": cursor.value.foto });\n        cursor.continue();\n      }\n    });\n  }\n  addRecord() {\n    var lastId: number = 0;\n    if (this.employeesData.length > 0) {\n      lastId = this.employeesData[this.employeesData.length - 1].id;\n    }\n    const nextId = lastId + 1;\n    var employee = {\n      \"id\": nextId,\n      \"ssn\": this.ssn,\n      \"nama\": this.nama,\n      \"email\": this.email,\n      \"foto\": this.fotosrc\n    };\n    // console.log(employee);\n    this.db.add(this.objectStoreName, employee).then(() => {\n      // Do something after the value was added\n      this.employeesData.push(employee);\n      this.resetForm();\n    }, (error) => {\n      console.log(error);\n    });\n  }\n  deleteRecord() {\n    var _self = this;\n    this.selected.sort(function (a, b) {\n      return b - a;\n    });\n    this.selected.forEach((sel: any) => {\n      this.db.delete(this.objectStoreName, sel).then(() => {\n        // Do something after remove\n        var loc = this.employeesData.map(function (d) { return d['id']; }).indexOf(sel);\n        this.employeesData.splice(loc, 1);\n      }, (error) => {\n        console.log(error);\n      });\n    });\n    this.selected = [];\n    this.keyword = \"\";\n  }\n  change(index: number) {\n    if (this.selected.indexOf(this.employeesData[index].id) == -1) {\n      this.selected.push(this.employeesData[index].id);\n    } else {\n      var loc = this.selected.map(function (d) { return d; }).indexOf(this.employeesData[index].id);\n      this.selected.splice(loc, 1);\n    }\n    this.count = this.selected.length;\n  }\n  search(event) {\n    event.stopPropagation();\n    this.keyword = event.target.value;\n    this.searchResult = 'hide';\n    this.foundIndex = [];\n    if (this.keyword.length > 0) {\n      var x = this.filterData(event.target.value);\n      for (var i in x) {\n        var loc = this.employeesData.map(function (d) { return d['id']; }).indexOf(x[i].id);\n        this.foundIndex.push(loc);\n      }\n    } else {\n      this.foundIndex = [];\n    }\n  }\n  filterData(keyword) {\n    var regex = new RegExp(keyword, 'i');\n    const filtered = this.employeesData.filter(function (obj) {\n      return obj.nama.search(regex) > -1;\n    });\n    return filtered;\n  }\n  isMatched(i) {\n    var result = false;\n    if (this.keyword.length > 0) {\n      result = this.foundIndex.indexOf(i) > -1;\n    } else {\n      result = true;\n    }\n    return result;\n  }\n}\n"]}